import{useCallback as v,useEffect as E,useRef as t,useReducer as w}from"react";import{reducer as H}from"./reducer.js";var C=({words:n=["Hello World!","This is","a simple Typewriter"],loop:l=1,typeSpeed:f=80,deleteSpeed:g=50,delaySpeed:a=1500,onLoopDone:p,onType:y,onDelete:m,onDelay:T})=>{let[{speed:D,text:i,count:x},s]=w(H,{speed:f,text:"",count:0}),b=t(0),u=t(!1),e=t(!1),o=t(!1),r=t(!1),h=v(()=>{let c=x%n.length,d=n[c];e.current?(s({type:"DELETE",payload:d,speed:g}),i===""&&(e.current=!1,s({type:"COUNT"}))):(s({type:"TYPE",payload:d,speed:f}),o.current=!0,i===d&&(s({type:"DELAY",payload:a}),o.current=!1,r.current=!0,setTimeout(()=>{r.current=!1,e.current=!0},a),l>0&&(b.current+=1,b.current/n.length===l&&(r.current=!1,u.current=!0)))),o.current&&y&&y(b.current),e.current&&m&&m(),r.current&&T&&T()},[x,a,g,l,f,n,i,y,m,T]);return E(()=>{let c=setTimeout(h,D);return u.current&&clearTimeout(c),()=>clearTimeout(c)},[h,D]),E(()=>{p&&u.current&&p()},[p]),[i,{isType:o.current,isDelay:r.current,isDelete:e.current,isDone:u.current}]};export{C as useTypewriter};
